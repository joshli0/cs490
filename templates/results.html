<!DOCTYPE html>
<html>

	<head>
		<title>Results</title>
    <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Rubik:400,700'>
    <link rel='stylesheet' href="./style.css">
		<script src="./script.js"></script>
	</head>

  <body>
		<nav>
      <label class="logo">Results</label>
      <ul>
        <li><a href="./app?page=landing">Home</a></li>
				<li><a href="./app?page=exam_list">Exam List</a></li>
				<li><a href="./app?page=view_results">View Results</a></li>
				<li><a href="./logout">Log Out</a>
      </ul>
    </nav>

<!-- View Exam ---------------------------------------------------------------->
<div class="review">
		<table style="width:100%;">
				<tr> <!-- headers -->
					<h2><th>Question</th></h2>
					<h2><th>Response</th></h2>
					<h2><th>Expected</th></h2>
					<h2><th>Actual</th></h2>
					<h2><th>Max Points</th></h2>
					<h2><th>Points</th></h2>
					<h2><th>Comment</th></h2>
				</tr>
				{% for qnum in range(questions|length) %}
					{% set q = questions[qnum] %}
					{% set numTestCases = (questions[qnum].testcaseoutputs|length) %}
					{% set pointsPerThing = (q.points/((2*numTestCases+1)|float))|round(2) %}
					{% set numGrades = numTestCases+1 %}
					<tr>
						<td rowspan="{{numGrades}}">
							Title: {{ q.title }}<br>
							Total Points: {{ q.points }}<br>
							Prompt: {{ q.description }}
						</td>

						<td rowspan="{{numGrades}}"><pre>{{ answers[qnum] }}</pre></td>

						<td>Function should be named: {{ q.functionname }}</td>

						<td>{{ function_names[qnum] }}</td>

						<td>{{ pointsPerThing }}</td>

						<td>+{{ points[qnum][0] }}</td>

				<td rowspan="{{numGrades}}">{{ commentsPerQuestion[qnum] }}</td>
				</tr>

				{% for tcnum in range(numTestCases) %}
					<tr>
						<td>{{ q.functionname }}({{ q.testcaseargs[tcnum] }}) -> {{ q.testcaseoutputs[tcnum] }}</td>

						<td>
							{% if code_outputs[qnum][tcnum] is not none %}
								{{ code_outputs[qnum][tcnum] }}
							{% else %}
								Code crashed.
							{% endif %}
						</td>

			<td>{{ pointsPerThing*2 }}</td>

			<td>+{{ points[qnum][tcnum+1] }}</td>

		</tr>
				{% endfor %}

		<td colspan="4" style=text-align:right;><b>Total:</b></td>
		<td>{{ q.points }}</td>
		<td>{{ (scorePerQuestion[qnum])|round(1) }}</td>
				<td id="total-{{qnum}}"></td>
				{% endfor %}
		</table><br>

		<table>

		<tr>
			<th><h3>Overall Test Comments:</h3></th>
			<th>Scores</th>
		</tr>

		<tr>
			<td>{{ wholeTestComments }}</td>
			<td> {{ (scoreTotal)|round(1) }} / {{ scoreMax }}</td>
		</tr>

	</table><br>

		<a href="/app?page=view_results">Back to Exams</a>
</div> <!-- end review -->

  </body>

</html>

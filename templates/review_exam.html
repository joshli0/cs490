<!DOCTYPE html>
<html>

	<head>
		<title>Review Exam</title>
    <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Rubik:400,700'>
    <link rel='stylesheet' href="./style.css">
		<script src="./script.js"></script>
	</head>

  <body style="background-color:#EFEFEF;">
		<nav>
      <label class="logo">Review Exam</label>
      <ul>
				<li><a href="./app?page=landing">Home</a></li>
				<li><a href="./app?page=manage_questions">Manage Questions</a></li>
				<li><a href="./app?page=manage_exams">Manage Exams</a></li>
				<li><a href="./app?page=grade_exams">Grade Exams</a></li>
				<li><a href="./logout">Log Out</a>
      </ul>
    </nav>

<!-- View Exam ---------------------------------------------------------------->
	<div class="review">
		<table style="width:100%;">
				<tr> <!-- headers -->
					<h2><th>Question</th></h2>
					<h2><th>Response</th></h2>
          <h2><th>Expected</th></h2>
          <h2><th>Actual</th></h2>
          <h2><th>Autograder Points</th></h2>
          <h2><th>Max Points</th></h2>
          <h2><th>Override Points</th></h2>
          <h2><th>Comment</th></h2>
				</tr>


				{% for qnum in range(questions|length) %}
				{% set q = questions[qnum] %}
				{% set numTestCases = (questions[qnum].testcaseoutputs|length) %}
				{% set pointsPerThing = (q.points/((2*numTestCases+1)|float))|round(2) %}
				{% set numGrades = numTestCases+1 %}
				<tr>
					<td rowspan="{{numGrades}}">
						Title: {{ q.title }}<br>
						Total Points: {{ q.points }}<br>
						Prompt: {{ q.description }}
					</td>

					<td rowspan="{{numGrades}}"><pre>{{ answers[qnum] }}</pre></td>

				  <td>Function should be named: {{ q.functionname }}</td>

					<td>{{ function_names[qnum] }}</td>

          <td>+{{ autograderPoints[qnum][0] }}</td>

          <td>{{ pointsPerThing }}</td>

          <td>+<input type="number" class="numberfield" value="{{ manualPoints[qnum][0] }}" name="pointCorrection"></td>
          <td rowspan="{{numGrades}}"><textarea name="comment" value="test"></textarea></td>
        </tr>

				{% for tcnum in range(numTestCases) %}
				<tr>
				  <td>{{ q.functionname }}({{ q.testcaseargs[tcnum] }}) -> {{ q.testcaseoutputs[tcnum] }}</td>

					<td>
						{% if code_outputs[qnum][tcnum] is not none %}
							{{ code_outputs[qnum][tcnum] }}
						{% else %}
							Code crashed.
						{% endif %}
					</td>

          <td>+{{ autograderPoints[qnum][tcnum+1] }}</td>

          <td>{{ pointsPerThing*2 }}</td>

          <td>+<input type="number" class="numberfield" value="{{ manualPoints[qnum][tcnum+1] }}"name="pointCorrection"></td>
        </tr>
				{% endfor %}

        <td colspan="4" style=text-align:right;><b>Total:</b></td>
        <td>score</td>
        <td>exam total</td>
				<td>override total</td>
				{% endfor %}
		</table><br>

		<h3>Overall Test Comments:</h3><textarea name="comments_on_whole_test" value="test" cols=100 rows=5></textarea><br><br>

		<button type="button" onclick="location.href='./app?page=grade_exams'">Finish Review</button><br><br>

	</div> <!-- end page box -->

  </body>

</html>
